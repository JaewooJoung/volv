<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Software License Permissions Database</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            padding: 20px;
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .description {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto 20px;
            line-height: 1.6;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .search-box {
            flex-grow: 1;
            max-width: 400px;
        }
        
        .search-box input {
            width: 100%;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .category-filter {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .category-btn {
            padding: 8px 15px;
            background: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .category-btn:hover {
            background: #e2e8f0;
        }
        
        .category-btn.active {
            background: #4a5568;
            color: white;
        }
        
        .table-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            overflow-x: auto;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1500px;
        }
        
        th {
            background-color: #4a5568;
            color: white;
            padding: 15px;
            text-align: left;
            position: sticky;
            top: 0;
            cursor: pointer;
            user-select: none;
        }
        
        th:hover {
            background-color: #2d3748;
        }
        
        th.sort-asc::after {
            content: " ↑";
        }
        
        th.sort-desc::after {
            content: " ↓";
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        tr:nth-child(even) {
            background-color: #f7fafc;
        }
        
        tr:hover {
            background-color: #edf2f7;
        }
        
        .license-name {
            font-weight: bold;
            color: #2d3748;
        }
        
        .spdx-id {
            font-family: monospace;
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.9rem;
        }
        
        .permission-yes {
            color: #38a169;
            font-weight: bold;
            text-align: center;
        }
        
        .permission-no {
            color: #e53e3e;
            font-weight: bold;
            text-align: center;
        }
        
        .permission-conditional {
            color: #d69e2e;
            font-weight: bold;
            text-align: center;
        }
        
        .permission-notes {
            font-size: 0.8rem;
            color: #4a5568;
            margin-top: 2px;
        }
        
        .category {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .category-popular {
            background: #c6f6d5;
            color: #22543d;
        }
        
        .category-other {
            background: #fed7d7;
            color: #742a2a;
        }
        
        .category-superseded {
            background: #e9d8fd;
            color: #44337a;
        }
        
        .category-non-reusable {
            background: #fbd38d;
            color: #744210;
        }
        
        .category-special {
            background: #9ae6b4;
            color: #22543d;
        }
        
        .category-international {
            background: #90cdf4;
            color: #1a365d;
        }
        
        .category-redundant {
            background: #fbb6ce;
            color: #702459;
        }
        
        .category-uncategorized {
            background: #e2e8f0;
            color: #2d3748;
        }
        
        .stats {
            margin-top: 20px;
            color: white;
            text-align: center;
            font-size: 0.9rem;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            color: white;
            font-size: 0.9rem;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .search-box {
                max-width: 100%;
            }
            
            .table-container {
                border-radius: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Software License Permissions Database</h1>
            <p class="description">Compare software licenses based on permissions, limitations, and conditions. Click column headers to sort.</p>
        </header>
        
        <div class="controls">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search licenses...">
            </div>
            <div class="category-filter">
                <button class="category-btn active" data-category="all">All Licenses</button>
                <button class="category-btn" data-category="Popular / Strong Community">Popular</button>
                <button class="category-btn" data-category="Other/Miscellaneous">Other</button>
                <button class="category-btn" data-category="Permissive">Permissive</button>
                <button class="category-btn" data-category="Copyleft">Copyleft</button>
            </div>
        </div>
        
        <div class="table-container">
            <table id="licenseTable">
                <thead>
                    <tr>
                        <th data-sort="name">License Name</th>
                        <th data-sort="spdx">SPDX ID</th>
                        <th data-sort="category">Category</th>
                        <th colspan="4" style="text-align: center;">Permissions</th>
                        <th colspan="3" style="text-align: center;">Limitations</th>
                        <th colspan="2" style="text-align: center;">Conditions</th>
                    </tr>
                    <tr>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th data-sort="commercial">Commercial Use</th>
                        <th data-sort="modification">Modification</th>
                        <th data-sort="distribution">Distribution</th>
                        <th data-sort="private">Private Use</th>
                        <th data-sort="liability">Liability</th>
                        <th data-sort="warranty">Warranty</th>
                        <th data-sort="patent">Patent Use</th>
                        <th data-sort="notice">License Notice</th>
                        <th data-sort="sameLicense">Same License</th>
                    </tr>
                </thead>
                <tbody id="licenseTableBody">
                    <!-- License data will be inserted here by JavaScript -->
                </tbody>
            </table>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background-color: #38a169;"></div>
                <span>Allowed</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #e53e3e;"></div>
                <span>Not Allowed</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #d69e2e;"></div>
                <span>Conditional</span>
            </div>
        </div>
        
        <div class="stats">
            <p id="licenseCount">Showing 0 licenses</p>
        </div>
    </div>

    <script>
        // License data with permissions, limitations, and conditions
        const licenses = [
            {
                name: "MIT License",
                spdx: "MIT",
                category: "Popular / Strong Community",
                permissions: {
                    commercial: { value: "yes", notes: "" },
                    modification: { value: "yes", notes: "" },
                    distribution: { value: "yes", notes: "" },
                    private: { value: "yes", notes: "" }
                },
                limitations: {
                    liability: { value: "yes", notes: "Limited" },
                    warranty: { value: "no", notes: "No warranty" },
                    patent: { value: "no", notes: "No explicit patent grant" }
                },
                conditions: {
                    notice: { value: "yes", notes: "Must include copyright notice" },
                    sameLicense: { value: "no", notes: "" }
                }
            },
            {
                name: "Apache License 2.0",
                spdx: "Apache-2.0",
                category: "Popular / Strong Community",
                permissions: {
                    commercial: { value: "yes", notes: "" },
                    modification: { value: "yes", notes: "" },
                    distribution: { value: "yes", notes: "" },
                    private: { value: "yes", notes: "" }
                },
                limitations: {
                    liability: { value: "yes", notes: "Limited" },
                    warranty: { value: "no", notes: "No warranty" },
                    patent: { value: "yes", notes: "Explicit patent grant" }
                },
                conditions: {
                    notice: { value: "yes", notes: "Must include copyright, patent, and attribution notices" },
                    sameLicense: { value: "no", notes: "" }
                }
            },
            {
                name: "GNU GPL v3.0",
                spdx: "GPL-3.0-only",
                category: "Popular / Strong Community",
                permissions: {
                    commercial: { value: "yes", notes: "" },
                    modification: { value: "yes", notes: "" },
                    distribution: { value: "conditional", notes: "Must provide source code" },
                    private: { value: "yes", notes: "" }
                },
                limitations: {
                    liability: { value: "yes", notes: "Limited" },
                    warranty: { value: "no", notes: "No warranty" },
                    patent: { value: "yes", notes: "Explicit patent grant and retaliation clause" }
                },
                conditions: {
                    notice: { value: "yes", notes: "Must include copyright notice and license" },
                    sameLicense: { value: "yes", notes: "Derivative works must use GPL v3" }
                }
            },
            {
                name: "BSD 2-Clause",
                spdx: "BSD-2-Clause",
                category: "Popular / Strong Community",
                permissions: {
                    commercial: { value: "yes", notes: "" },
                    modification: { value: "yes", notes: "" },
                    distribution: { value: "yes", notes: "" },
                    private: { value: "yes", notes: "" }
                },
                limitations: {
                    liability: { value: "yes", notes: "Limited" },
                    warranty: { value: "no", notes: "No warranty" },
                    patent: { value: "no", notes: "No explicit patent grant" }
                },
                conditions: {
                    notice: { value: "yes", notes: "Must include copyright notice" },
                    sameLicense: { value: "no", notes: "" }
                }
            },
            {
                name: "BSD 3-Clause",
                spdx: "BSD-3-Clause",
                category: "Popular / Strong Community",
                permissions: {
                    commercial: { value: "yes", notes: "" },
                    modification: { value: "yes", notes: "" },
                    distribution: { value: "yes", notes: "" },
                    private: { value: "yes", notes: "" }
                },
                limitations: {
                    liability: { value: "yes", notes: "Limited" },
                    warranty: { value: "no", notes: "No warranty" },
                    patent: { value: "no", notes: "No explicit patent grant" }
                },
                conditions: {
                    notice: { value: "yes", notes: "Must include copyright notice" },
                    sameLicense: { value: "no", notes: "No endorsement without permission" }
                }
            },
            {
                name: "Mozilla Public License 2.0",
                spdx: "MPL-2.0",
                category: "Popular / Strong Community",
                permissions: {
                    commercial: { value: "yes", notes: "" },
                    modification: { value: "yes", notes: "" },
                    distribution: { value: "conditional", notes: "File-based copyleft" },
                    private: { value: "yes", notes: "" }
                },
                limitations: {
                    liability: { value: "yes", notes: "Limited" },
                    warranty: { value: "no", notes: "No warranty" },
                    patent: { value: "yes", notes: "Explicit patent grant" }
                },
                conditions: {
                    notice: { value: "yes", notes: "Must include copyright notice" },
                    sameLicense: { value: "conditional", notes: "MPL for MPL-licensed files" }
                }
            },
            {
                name: "Eclipse Public License 2.0",
                spdx: "EPL-2.0",
                category: "Popular / Strong Community",
                permissions: {
                    commercial: { value: "yes", notes: "" },
                    modification: { value: "yes", notes: "" },
                    distribution: { value: "conditional", notes: "Weak copyleft" },
                    private: { value: "yes", notes: "" }
                },
                limitations: {
                    liability: { value: "yes", notes: "Limited" },
                    warranty: { value: "no", notes: "No warranty" },
                    patent: { value: "yes", notes: "Explicit patent grant" }
                },
                conditions: {
                    notice: { value: "yes", notes: "Must include copyright notice" },
                    sameLicense: { value: "conditional", notes: "EPL for EPL-licensed contributions" }
                }
            },
            {
                name: "GNU LGPL v2.1",
                spdx: "LGPL-2.1",
                category: "Popular / Strong Community",
                permissions: {
                    commercial: { value: "yes", notes: "" },
                    modification: { value: "yes", notes: "" },
                    distribution: { value: "conditional", notes: "Weak copyleft" },
                    private: { value: "yes", notes: "" }
                },
                limitations: {
                    liability: { value: "yes", notes: "Limited" },
                    warranty: { value: "no", notes: "No warranty" },
                    patent: { value: "no", notes: "No explicit patent grant" }
                },
                conditions: {
                    notice: { value: "yes", notes: "Must include copyright notice" },
                    sameLicense: { value: "conditional", notes: "LGPL for LGPL-licensed library" }
                }
            },
            {
                name: "GNU AGPL v3.0",
                spdx: "AGPL-3.0-only",
                category: "Uncategorized",
                permissions: {
                    commercial: { value: "yes", notes: "" },
                    modification: { value: "yes", notes: "" },
                    distribution: { value: "conditional", notes: "Network use is distribution" },
                    private: { value: "yes", notes: "" }
                },
                limitations: {
                    liability: { value: "yes", notes: "Limited" },
                    warranty: { value: "no", notes: "No warranty" },
                    patent: { value: "yes", notes: "Explicit patent grant" }
                },
                conditions: {
                    notice: { value: "yes", notes: "Must include copyright notice" },
                    sameLicense: { value: "yes", notes: "Derivative works must use AGPL v3" }
                }
            },
            {
                name: "ISC License",
                spdx: "ISC",
                category: "Uncategorized",
                permissions: {
                    commercial: { value: "yes", notes: "" },
                    modification: { value: "yes", notes: "" },
                    distribution: { value: "yes", notes: "" },
                    private: { value: "yes", notes: "" }
                },
                limitations: {
                    liability: { value: "yes", notes: "Limited" },
                    warranty: { value: "no", notes: "No warranty" },
                    patent: { value: "no", notes: "No explicit patent grant" }
                },
                conditions: {
                    notice: { value: "yes", notes: "Must include copyright notice" },
                    sameLicense: { value: "no", notes: "" }
                }
            },
            {
                name: "Unlicense",
                spdx: "Unlicense",
                category: "Special Purpose",
                permissions: {
                    commercial: { value: "yes", notes: "" },
                    modification: { value: "yes", notes: "" },
                    distribution: { value: "yes", notes: "" },
                    private: { value: "yes", notes: "" }
                },
                limitations: {
                    liability: { value: "yes", notes: "Limited" },
                    warranty: { value: "no", notes: "No warranty" },
                    patent: { value: "yes", notes: "Public domain dedication" }
                },
                conditions: {
                    notice: { value: "no", notes: "No requirements" },
                    sameLicense: { value: "no", notes: "" }
                }
            },
            {
                name: "Creative Commons Zero",
                spdx: "CC0-1.0",
                category: "Special Purpose",
                permissions: {
                    commercial: { value: "yes", notes: "" },
                    modification: { value: "yes", notes: "" },
                    distribution: { value: "yes", notes: "" },
                    private: { value: "yes", notes: "" }
                },
                limitations: {
                    liability: { value: "yes", notes: "Limited" },
                    warranty: { value: "no", notes: "No warranty" },
                    patent: { value: "yes", notes: "Public domain dedication" }
                },
                conditions: {
                    notice: { value: "no", notes: "No requirements" },
                    sameLicense: { value: "no", notes: "" }
                }
            },
            {
                name: "BSD 1-Clause",
                spdx: "BSD-1-Clause",
                category: "Other/Miscellaneous",
                permissions: {
                    commercial: { value: "yes", notes: "" },
                    modification: { value: "yes", notes: "" },
                    distribution: { value: "yes", notes: "" },
                    private: { value: "yes", notes: "" }
                },
                limitations: {
                    liability: { value: "yes", notes: "Limited" },
                    warranty: { value: "no", notes: "No warranty" },
                    patent: { value: "no", notes: "No explicit patent grant" }
                },
                conditions: {
                    notice: { value: "yes", notes: "Must include copyright notice" },
                    sameLicense: { value: "no", notes: "" }
                }
            },
            {
                name: "Artistic License 2.0",
                spdx: "Artistic-2.0",
                category: "Other/Miscellaneous",
                permissions: {
                    commercial: { value: "yes", notes: "" },
                    modification: { value: "yes", notes: "" },
                    distribution: { value: "conditional", notes: "Specific packaging rules" },
                    private: { value: "yes", notes: "" }
                },
                limitations: {
                    liability: { value: "yes", notes: "Limited" },
                    warranty: { value: "no", notes: "No warranty" },
                    patent: { value: "no", notes: "No explicit patent grant" }
                },
                conditions: {
                    notice: { value: "yes", notes: "Must include copyright notice" },
                    sameLicense: { value: "conditional", notes: "Modified versions have specific requirements" }
                }
            }
        ];

        // DOM elements
        const tableBody = document.getElementById('licenseTableBody');
        const searchInput = document.getElementById('searchInput');
        const categoryButtons = document.querySelectorAll('.category-btn');
        const licenseCount = document.getElementById('licenseCount');
        const tableHeaders = document.querySelectorAll('th[data-sort]');

        // State
        let currentSort = { column: 'name', direction: 'asc' };
        let currentCategory = 'all';
        let currentSearch = '';

        // Initialize
        function init() {
            renderTable(licenses);
            setupEventListeners();
            updateLicenseCount(licenses.length);
        }

        // Render table with data
        function renderTable(data) {
            tableBody.innerHTML = '';
            
            data.forEach(license => {
                const row = document.createElement('tr');
                
                // License name cell
                const nameCell = document.createElement('td');
                nameCell.className = 'license-name';
                nameCell.textContent = license.name;
                
                // SPDX ID cell
                const spdxCell = document.createElement('td');
                if (license.spdx) {
                    const spdxSpan = document.createElement('span');
                    spdxSpan.className = 'spdx-id';
                    spdxSpan.textContent = license.spdx;
                    spdxCell.appendChild(spdxSpan);
                } else {
                    spdxCell.textContent = '-';
                }
                
                // Category cell
                const categoryCell = document.createElement('td');
                if (license.category) {
                    const categorySpan = document.createElement('span');
                    categorySpan.className = `category category-${getCategoryClass(license.category)}`;
                    categorySpan.textContent = license.category;
                    categoryCell.appendChild(categorySpan);
                } else {
                    categoryCell.textContent = '-';
                }
                
                // Permissions cells
                const commercialCell = document.createElement('td');
                commercialCell.className = `permission-${license.permissions.commercial.value}`;
                commercialCell.innerHTML = formatPermission(license.permissions.commercial);
                
                const modificationCell = document.createElement('td');
                modificationCell.className = `permission-${license.permissions.modification.value}`;
                modificationCell.innerHTML = formatPermission(license.permissions.modification);
                
                const distributionCell = document.createElement('td');
                distributionCell.className = `permission-${license.permissions.distribution.value}`;
                distributionCell.innerHTML = formatPermission(license.permissions.distribution);
                
                const privateCell = document.createElement('td');
                privateCell.className = `permission-${license.permissions.private.value}`;
                privateCell.innerHTML = formatPermission(license.permissions.private);
                
                // Limitations cells
                const liabilityCell = document.createElement('td');
                liabilityCell.className = `permission-${license.limitations.liability.value}`;
                liabilityCell.innerHTML = formatPermission(license.limitations.liability);
                
                const warrantyCell = document.createElement('td');
                warrantyCell.className = `permission-${license.limitations.warranty.value}`;
                warrantyCell.innerHTML = formatPermission(license.limitations.warranty);
                
                const patentCell = document.createElement('td');
                patentCell.className = `permission-${license.limitations.patent.value}`;
                patentCell.innerHTML = formatPermission(license.limitations.patent);
                
                // Conditions cells
                const noticeCell = document.createElement('td');
                noticeCell.className = `permission-${license.conditions.notice.value}`;
                noticeCell.innerHTML = formatPermission(license.conditions.notice);
                
                const sameLicenseCell = document.createElement('td');
                sameLicenseCell.className = `permission-${license.conditions.sameLicense.value}`;
                sameLicenseCell.innerHTML = formatPermission(license.conditions.sameLicense);
                
                // Append all cells to row
                row.appendChild(nameCell);
                row.appendChild(spdxCell);
                row.appendChild(categoryCell);
                row.appendChild(commercialCell);
                row.appendChild(modificationCell);
                row.appendChild(distributionCell);
                row.appendChild(privateCell);
                row.appendChild(liabilityCell);
                row.appendChild(warrantyCell);
                row.appendChild(patentCell);
                row.appendChild(noticeCell);
                row.appendChild(sameLicenseCell);
                
                tableBody.appendChild(row);
            });
        }

        // Format permission for display
        function formatPermission(permission) {
            let displayText = permission.value.toUpperCase();
            if (permission.value === 'yes') displayText = '✓';
            if (permission.value === 'no') displayText = '✗';
            if (permission.value === 'conditional') displayText = '~';
            
            let html = `<div>${displayText}</div>`;
            if (permission.notes) {
                html += `<div class="permission-notes">${permission.notes}</div>`;
            }
            return html;
        }

        // Get CSS class for category
        function getCategoryClass(category) {
            const classMap = {
                'Popular / Strong Community': 'popular',
                'Other/Miscellaneous': 'other',
                'Superseded': 'superseded',
                'Non-Reusable': 'non-reusable',
                'Special Purpose': 'special',
                'International': 'international',
                'Redundant with more popular': 'redundant',
                'Uncategorized': 'uncategorized',
                'Voluntarily retired': 'superseded'
            };
            
            return classMap[category] || 'other';
        }

        // Filter and sort data
        function getFilteredAndSortedData() {
            let filtered = licenses.filter(license => {
                // Category filter
                if (currentCategory === 'Permissive') {
                    if (!['MIT', 'Apache-2.0', 'BSD-2-Clause', 'BSD-3-Clause', 'ISC', 'BSD-1-Clause'].includes(license.spdx)) {
                        return false;
                    }
                } else if (currentCategory === 'Copyleft') {
                    if (!['GPL-3.0-only', 'AGPL-3.0-only', 'LGPL-2.1', 'MPL-2.0', 'EPL-2.0'].includes(license.spdx)) {
                        return false;
                    }
                } else if (currentCategory !== 'all' && license.category !== currentCategory) {
                    return false;
                }
                
                // Search filter
                if (currentSearch) {
                    const searchLower = currentSearch.toLowerCase();
                    return license.name.toLowerCase().includes(searchLower) || 
                           (license.spdx && license.spdx.toLowerCase().includes(searchLower)) ||
                           (license.category && license.category.toLowerCase().includes(searchLower));
                }
                
                return true;
            });
            
            // Sort data
            filtered.sort((a, b) => {
                let aValue, bValue;
                
                if (['commercial', 'modification', 'distribution', 'private', 'liability', 'warranty', 'patent', 'notice', 'sameLicense'].includes(currentSort.column)) {
                    // Sort by permission value
                    if (currentSort.column in a.permissions) {
                        aValue = a.permissions[currentSort.column].value;
                        bValue = b.permissions[currentSort.column].value;
                    } else if (currentSort.column in a.limitations) {
                        aValue = a.limitations[currentSort.column].value;
                        bValue = b.limitations[currentSort.column].value;
                    } else if (currentSort.column in a.conditions) {
                        aValue = a.conditions[currentSort.column].value;
                        bValue = b.conditions[currentSort.column].value;
                    }
                } else {
                    // Sort by regular property
                    aValue = a[currentSort.column];
                    bValue = b[currentSort.column];
                }
                
                // Handle empty values
                if (!aValue) aValue = '';
                if (!bValue) bValue = '';
                
                // Custom sorting for permission values
                const valueOrder = { 'yes': 1, 'conditional': 2, 'no': 3 };
                if (valueOrder[aValue] && valueOrder[bValue]) {
                    aValue = valueOrder[aValue];
                    bValue = valueOrder[bValue];
                }
                
                if (currentSort.direction === 'asc') {
                    return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;
                } else {
                    return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;
                }
            });
            
            return filtered;
        }

        // Update table based on current filters and sort
        function updateTable() {
            const data = getFilteredAndSortedData();
            renderTable(data);
            updateLicenseCount(data.length);
        }

        // Update license count
        function updateLicenseCount(count) {
            licenseCount.textContent = `Showing ${count} licenses`;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Search input
            searchInput.addEventListener('input', (e) => {
                currentSearch = e.target.value;
                updateTable();
            });
            
            // Category buttons
            categoryButtons.forEach(button => {
                button.addEventListener('click', () => {
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    currentCategory = button.dataset.category;
                    updateTable();
                });
            });
            
            // Table header sorting
            tableHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const column = header.dataset.sort;
                    
                    // Update sort direction
                    if (currentSort.column === column) {
                        currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
                    } else {
                        currentSort.column = column;
                        currentSort.direction = 'asc';
                    }
                    
                    // Update UI
                    tableHeaders.forEach(h => {
                        h.classList.remove('sort-asc', 'sort-desc');
                    });
                    header.classList.add(`sort-${currentSort.direction}`);
                    
                    updateTable();
                });
            });
        }

        // Initialize the application
        init();
    </script>
</body>
</html>
